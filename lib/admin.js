function menu(){$(window).width()<768&&($("#sidePane").fadeToggle(200),$("#side").toggleClass("active"))}function dbtab(e){cli(),jp.destroyAll(),"0px"==$("#side").css("left")&&(menu(),$("#side").scrollTop(0)),$(".dbtab").each((function(){$(this).removeClass("dactive")})),$(".tabBtn").each((function(){$(this).removeClass("hactive")})),$(window).width()<=768?$("#header_main").scrollLeft($("#header_main").scrollLeft()+$("#dbb-"+e).position().left-50):$("#header_main").scrollLeft($("#header_main").scrollLeft()+$("#dbb-"+e).position().left),$("#dbb-"+e).addClass("hactive"),$("#dbtab-"+e).addClass("dactive"),4==e&&$("#supportCount").html("")}function downloadLogs(){jp.prompt({title:"Enter PP",inputType:"password",required:!0,callback:function(e){e.stat&&socket.emit("download_logs",e.res,(function(e){preloader(0),e.succ?jp.succ('<a href="'+e.message+'" onclick="jp.destroyAll()" class="btn btn-success" download>Download</a>'):e.message?jp.err(e.message):Err("An unknown error occured")}))}})}function addLog(){jp.prompt({title:"write log",inputType:"text",required:!0,callback:function(e){var t;e.stat&&((t={}).txt=e.res,jp.prompt({title:"Enter PP",inputType:"password",required:!0,callback:function(e){e.stat&&(t.pw=e.res,socket.emit("add_log",t,(function(e){preloader(0),e.succ?Succ("Log added successfully!"):e.message?Err(e.message):Err("An unknown error occured")})))}}))}})}function deleteLogs(){jp.prompt({title:"Enter PP",inputType:"password",required:!0,callback:function(e){e.stat&&socket.emit("delete_logs",e.res,(function(e){preloader(0),e.succ?Succ("Logs deleted successfully!"):e.message?Err(e.message):Err("An unknown error occured")}))}})}var admin,timex;function Succ(e){return jp.succ(e)}function Err(e){return jp.err(e)}function load_admin(){var e={};e.username=adminUN,socket.emit("load_admin",e,(function(e){var t;if(e.processed)if($("#lxx").html(e.l_c),$("#mxx").html(e.m_c),$("#socks").html(e.sockets),0==e.links.length)$("#links").html('<p class="panP grey padtwenty overhide text-center"><i class="fa-solid fa-warning"></i> No links created yet</p>');else{links=e.links;var s=[];t=1,s.push('<div class="wide horizon table-responsive"><table class="table titi table-bordered table-striped"><tr><th>S/N</th><th>ID</th><th>Token</th><th>Name</th><th>Messages</th><th>Log</th><th>Reg</th><th>Action</th></tr>'),e.links.forEach((function(e){var r="<tr><td>"+t+"</td><td>"+e.id+"</td><td>"+e.token+"</td><td>"+e.name+"</td><td>"+e.message_count+"</td><td>"+dftsx(e.log_ts)+"</td><td>"+e.date_created+"</td>";r+='<td class="silver-bg"><button onclick="viewMess('+e.token+')" class="btn marfive btn-xs btn-info">View</button>',s.push(r),t++})),s.push("</table></div>"),$("#links").html(s.join(""))}}))}function viewMess(e){preloader(1),socket.emit("admin_view_messages_93ehgyui94i94u8uf",e,(function(e){if(preloader(0),e.succ){var t=e.message;if(0==t.length)jp.info("No data to show!");else{var s=[];t.forEach((e=>{var t=`<div class="white-bg radfive black-outx padten">\n                    <small class="grey"><strong>${e.id} | ${e.date_created} | seen: ${e.seen_status}</strong></small>\n                    <br>\n                    ${entities(e.message)}\n                    </div>`;s.push(t)})),$("#messx").html(s.join("<br>")),tab("mess"),$("#tab-mess").scrollTop(0)}}else jp.err("Operation failed!")}))}function logout(){jp.confirm("are you sure you want to logout?",(function(e){e&&jp.confirm("Do you want to remove your account from this device?",(function(e){preloader(1),window.location=e?"/admin_logout/1":"/admin_logout/0"}),!1)}),!1)}socket.on("admin",(function(){load_admin()})),$(document).ready((function(){}));var que,adminPresence=1;function sql(){jp.prompt({title:"write query",inputType:"textarea",value:que,required:!0,callback:function(e){e.stat&&(/drop|truncate/gi.test(e.res)?Err("You cannot use the keyword alter or delete or drop or empty"):(que=""+e.res,jp.prompt({title:"Enter Priv Password",inputType:"password",required:!0,callback:function(t){t.stat&&(preloader(1),socket.emit("query",{query:e.res,password:t.res},(function(e){preloader(0),e.err?Err(JSON.stringify(e.message)):jp.confirm('<p class="panP black">Query successful... Would you like to view results?</p>',(function(t){t&&jp.info("RESULT<br><div class='horizon' style='width:100%;overflow:auto;'>"+JSON.stringify(e.message)+"</div>")}))})))}})))}})}function updatePass(e){jp.prompt({title:"Type in new password",inputType:"password",required:!0,callback:function(t){var s;t.stat&&((s={}).npw=t.res,jp.prompt({title:"Repeat new password",inputType:"password",required:!0,callback:function(t){t.stat&&(s.cpw=t.res,s.npw!==s.cpw?jp.err("Passwords do not match!"):jp.prompt({title:"Type in your old password to verify the operation.",inputType:"password",required:!0,callback:function(t){t.stat&&(s.opw=t.res,s.un=e,preloader(1),socket.emit("change_admin_password",s,(function(e){preloader(0),e.succ?jp.succ("Password changed successfully!"):e.message?jp.err(e.message):jp.err("An unknown error occurred.")})))}}))}}))}})}function clone(e){return JSON.parse(JSON.stringify(e))}var visited=[];function tab(e){$(".tab").fadeOut(100),$("#tab-"+e).fadeIn(100);var t="tab('"+e.toString()+"')",s=visited.length-1;t==visited[s]&&visited.pop(),visited.push(t),"search"==e&&$("#search").focus(),img_res(),$("body").addClass("stop"),"search"==e&&$("#searchinp").focus()}function cli(a){$(".tab").fadeOut(100),visited.pop();var last=visited.length-1;eval(visited[last]),$("body").removeClass("stop")}function isArray(e){return e.constructor.toString().indexOf("Array")>-1}function addComs(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function dftsx(e){if(0==e)return" - ";var t,s=Number(e),r=new Date(s),a=r.getDate(),n=r.getMonth(),o=r.getFullYear(),i=r.getHours();i>11?(t="PM",i>12&&(i-=12)):(t="AM",i<1&&(i=12));var c,d=r.getMinutes();switch(1==i.toString().length&&(i="0"+i),1==d.toString().length&&(d="0"+d),n){case 0:default:c="Jan";break;case 1:c="Feb";break;case 2:c="Mar";break;case 3:c="Apr";break;case 4:c="May";break;case 5:c="Jun";break;case 6:c="Jul";break;case 7:c="Aug";break;case 8:c="Sep";break;case 9:c="Oct";break;case 10:c="Nov";break;case 11:c="Dec"}return c+" "+a+", "+o+" at "+i+":"+d+" "+t}abbrNum=function(e,t){if(null===e)return null;if(0===e)return"0";t=!t||t<0?0:t;var s=e.toPrecision(2).split("e"),r=1===s.length?0:Math.floor(Math.min(s[1].slice(1),14)/3),a=r<1?e.toFixed(0+t):(e/Math.pow(10,3*r)).toFixed(1+t);return(a<0?a:Math.abs(a))+["","K","M","B","T"][r]};